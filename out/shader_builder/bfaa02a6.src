#version 100
attribute highp vec2 a_position;attribute highp vec2 a_prev;attribute highp vec2 a_next;attribute highp float a_side;uniform highp mat4 u_pmvMatrix;uniform highp mat4 u_objXForm;void main() {    vec2 dir;    float len = a_side;    if (a_position == a_prev) {        dir = normalize(a_next.xy - a_position.xy);    }    else if (a_position == a_next) {        dir = normalize(a_position.xy - a_prev.xy);    }    else {        vec2 dirA = normalize(a_position.xy - a_prev.xy);        vec2 dirB = normalize(a_next.xy - a_position.xy);        vec2 tangent = normalize(dirA + dirB);        vec2 perp = vec2(-dirA.y, dirA.x);        vec2 miter = vec2(-tangent.y, tangent.x);        dir = tangent;        len = len / dot(miter,perp);    }    vec2 normal = vec2(-dir.y, dir.x) * len;    vec2 p = a_position + normal;    gl_Position = (u_pmvMatrix * u_objXForm) * vec4(p, 0.0, 1.0);}